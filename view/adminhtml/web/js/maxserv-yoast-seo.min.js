define(["jquery","domReady!"],function(a){a.widget("maxServ.yoastSeo",{_create:function(){var b=this;this.snippetPreviewElement=a("#yoast-seo-snippet-preview")[0];this.getInputElements();a("#yoast-seo-wrapper").tabs({active:0});this.inputElements=[this.titleInputElement,this.urlKeyInputElement,this.contentHeadingInputElement,this.contentInputElement,this.metaTitleInputElement,this.focusKeywordInputElement,this.metaDescriptionInputElement];this.setupSnippetPreview();this.setupApp();this.updateFieldsets();this.setupEventListeners()},setupSnippetPreview:function(){var b=this;b.snippetPreview=new YoastSEO.SnippetPreview({data:{title:b.getTitleValue(),keyword:b.getKeywordValue(),metaDesc:b.getDescriptionValue(),urlPath:b.getIdentifierValue()},callbacks:{saveSnippetData:function(c){b.saveSnippetData(c)}},baseUrl:b.getBaseUrl(),targetElement:b.snippetPreviewElement})},setupApp:function(){var b=this;this.app=new YoastSEO.App({snippetPreview:b.snippetPreview,targets:{output:"yoast-seo-output"},callbacks:{updateSnippetValues:function(){},getData:function(){return{baseUrl:b.getBaseUrl(),title:b.getTitleValue(),metaTitle:b.getTitleValue(),keyword:b.getKeywordValue(),text:b.getContentValue(),meta:b.getDescriptionValue(),metaDesc:b.getDescriptionValue()}}}});b.app.refresh()},updateFieldsets:function(){a("#yoast-seo-facebook").append(a(".yoastBox-facebook-fieldset"));a("#yoast-seo-twitter").append(a(".yoastBox-twitter-fieldset"))},update:function(){this.app.refresh();this.snippetPreview.setTitle(this.getTitleValue());this.snippetPreview.setUrlPath(this.getIdentifierValue());this.snippetPreview.setMetaDescription(this.getDescriptionValue())},setupEventListeners:function(){var b=this;a(this.inputElements).each(function(){a(this).on("change",function(){b.update()})})},saveSnippetData:function(b){this.setTitleValue(b.title);this.setDescriptionValue(b.metaDesc);this.setIdentifierValue(b.urlPath)},getBaseUrl:function(){var b=window.location.origin;if(b.substring(b.length-1,1)!=="/"){b+="/"}return b},getInputElements:function(){this.titleInputElement=a(".yoastBox-title .admin__control-text");this.urlKeyInputElement=a(".yoastBox-urlKey .admin__control-text");this.contentHeadingInputElement=a(".yoastBox-contentHeading .admin__control-text");this.contentInputElement=a(".yoastBox-content .textarea");this.metaTitleInputElement=a(".yoastBox-metaTitle .admin__control-text");this.focusKeywordInputElement=a(".yoastBox-focusKeyword .admin__control-text");this.metaDescriptionInputElement=a(".yoastBox-metaDescription .admin__control-textarea")},getCategoryInputElements:function(){this.titleInputElement=a('input[type=text][name="name"]');this.urlKeyInputElement=a('input[type=text][name="url_key"]');this.contentHeadingInputElement=false;this.contentInputElement=a("textarea[name=description]");this.metaTitleInputElement=a('input[type=text][name="meta_title"]');this.focusKeywordInputElement=a('input[type=text][name="focus_keyword"]');this.metaDescriptionInputElement=a('textarea[name="meta_description"]')},getTitleValue:function(){var c=this.metaTitleInputElement.val(),d=this.titleInputElement.val(),b=this.contentHeadingInputElement.val();if(c){return c}else{if(d){return d}else{if(b){return b}}}return""},setTitleValue:function(b){this.metaTitleInputElement.val(b);return this},getIdentifierValue:function(){return this.urlKeyInputElement.val()},setIdentifierValue:function(b){this.urlKeyInputElement.val(b);return this},getKeywordValue:function(){return this.focusKeywordInputElement.val()},setKeywordValue:function(b){this.focusKeywordInputElement.val(b);return this},getContentValue:function(){var b=this.contentInputElement.val();if(!b){b=this.metaDescriptionInputElement.val()}return b},setContentValue:function(b){this.metaDescriptionInputElement.val(b);return this},getDescriptionValue:function(){return this.metaDescriptionInputElement.val()},setDescriptionValue:function(b){this.metaDescriptionInputElement.val(b);return this}});return a.maxServ.yoastSeo});